library(shiny)

ui <- fluidPage(
  plotOutput("c"),
  actionButton('d', "make a plot")
  )

server <- function(input, output, session) {
  r<-reactive({iris$Sepal.Length})
  m<-modalDialog(
    title = "make plot?",
    footer = tagList(
      actionButton("ok","show plot"),
      actionButton("cancel","reset"))
    )

  observeEvent(input$d,{
    showModal(m)
    })
  
  observeEvent(input$cancel,{
    removeModal()
    output$c <- renderPlot({ NULL })
    })
  
  observeEvent(input$ok,{
    removeModal()
    withProgress(message = "Computing graph",{
      showNotification("all done")
      Sys.sleep(2)
      })

    output$c<-renderPlot({
      plot(r())
      })
  })
}
  
shinyApp(ui, server)
